{"ast":null,"code":"import _slicedToArray from\"C:/Users/Shyam/Desktop/instaclone_final/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import M from'materialize-css';import{useNavigate}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Createpost=function Createpost(){var navigate=useNavigate();var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),title=_useState2[0],setTitle=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),body=_useState4[0],setBody=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),description=_useState6[0],setDescription=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),image=_useState8[0],setImage=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),url=_useState10[0],setUrl=_useState10[1];useEffect(function(){if(url){fetch(\"/createpost\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\",\"Authorization\":\"Bearer \"+localStorage.getItem(\"jwt\")},body:JSON.stringify({title:title,body:body,description:description,pic:url})}).then(function(res){return res.json();}).then(function(data){console.log(data);if(data.error){M.toast({html:data.error,classes:\"#ef9a9a red lighten-3\"});}else{M.toast({html:\"Created Post successfully\",classes:\"#e91e63 pink\"});navigate('/postview');}}).catch(function(err){console.log(err);});}},[url]);var postDetails=function postDetails(){var data=new FormData();data.append(\"file\",image);data.append(\"upload_preset\",\"instagramclone\");data.append(\"cloud_name\",\"daxiadpan\");fetch(\"https://api.cloudinary.com/v1_1/daxiadpan/image/upload\",{method:\"post\",body:data}).then(function(res){return res.json();}).then(function(data){setUrl(data.url);}).catch(function(err){console.log(err);});};return/*#__PURE__*/_jsxs(\"div\",{className:\"card input-filed\",style:{margin:\"10px auto\",maxWidth:\"500px\",padding:\"20px\",textAlign:\"center\",\"background-color\":\" #e6e6e6\"},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"file-field input-field\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"btn \",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Choose a file\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",onChange:function onChange(e){return setImage(e.target.files[0]);}})]}),/*#__PURE__*/_jsx(\"div\",{className:\"file-path-wrapper\",children:/*#__PURE__*/_jsx(\"input\",{className:\"file-path validate\",type:\"text\"})})]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Author\",value:title,onChange:function onChange(e){return setTitle(e.target.value);}}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Location\",value:body,onChange:function onChange(e){return setBody(e.target.value);}}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"description\",value:description,onChange:function onChange(e){return setDescription(e.target.value);}}),/*#__PURE__*/_jsx(\"button\",{className:\"btn waves-effect waves-light #64b5f6 blue darken-1\",onClick:function onClick(){return postDetails();},children:\"Submit POST\"})]});};export default Createpost;","map":{"version":3,"names":["React","useState","useEffect","M","useNavigate","Createpost","navigate","title","setTitle","body","setBody","description","setDescription","image","setImage","url","setUrl","fetch","method","headers","localStorage","getItem","JSON","stringify","pic","then","res","json","data","console","log","error","toast","html","classes","catch","err","postDetails","FormData","append","margin","maxWidth","padding","textAlign","e","target","files","value"],"sources":["C:/Users/Shyam/Desktop/instaclone_final/client/src/components/screens/CreatePost.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport M from 'materialize-css';\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\n\r\nconst Createpost = ()=> {\r\n    const navigate = useNavigate();\r\n    const [title, setTitle] = useState(\"\")\r\n    const [body, setBody] = useState(\"\")\r\n    const [description, setDescription] = useState(\"\")\r\n    const [image, setImage] = useState(\"\")\r\n    const [url, setUrl] = useState(\"\")\r\n   \r\n   \r\n    useEffect(() => {\r\n        if (url) {\r\n            fetch(\"/createpost\", {\r\n                method: \"POST\",\r\n                headers: {\r\n                    \"Content-Type\":\"application/json\",\r\n                    \"Authorization\":\"Bearer \" +localStorage.getItem(\"jwt\")\r\n                },\r\n                body:JSON.stringify({\r\n                    title,\r\n                    body,\r\n                    description,\r\n                    pic:url\r\n\r\n                })\r\n            })\r\n                .then(res=> res.json())\r\n                .then(data=> {\r\n                    console.log(data)\r\n                    if (data.error) {\r\n                        M.toast({ html: data.error, classes: \"#ef9a9a red lighten-3\" })\r\n                    }\r\n                    else {\r\n                        M.toast({ html: \"Created Post successfully\", classes: \"#e91e63 pink\" })\r\n                        navigate('/postview')\r\n                    }\r\n                }).catch(err => {\r\n                    console.log(err)\r\n                })\r\n           }\r\n    }, [url])\r\n    const postDetails = () => {\r\n        const data = new FormData()\r\n        data.append(\"file\", image)\r\n        data.append(\"upload_preset\", \"instagramclone\")\r\n        data.append(\"cloud_name\", \"daxiadpan\")\r\n\r\n        fetch(\"https://api.cloudinary.com/v1_1/daxiadpan/image/upload\", {\r\n            method: \"post\",\r\n            body: data\r\n       \r\n        }).then(res=> res.json())\r\n            .then(data=> {\r\n                setUrl(data.url)\r\n            })\r\n            .catch(err => {\r\n                console.log(err);\r\n            })\r\n         }\r\n    return (\r\n        <div className=\"card input-filed\"\r\n            style={{\r\n\r\n                margin: \"10px auto\",\r\n                maxWidth: \"500px\",\r\n                padding: \"20px\",\r\n                textAlign: \"center\",\r\n                \"background-color\":\" #e6e6e6\"\r\n            }}\r\n        >\r\n\r\n                <div className=\"file-field input-field\">\r\n                <div className=\"btn \">\r\n                    <span>Choose a file</span>\r\n                    <input type=\"file\" onChange={(e) => setImage(e.target.files[0])} />\r\n                </div>\r\n                <div className=\"file-path-wrapper\">\r\n                <input className=\"file-path validate\" type=\"text\" />\r\n            </div>\r\n            </div>\r\n            <input type=\"text\" placeholder=\"Author\" value={title} onChange={(e) => setTitle(e.target.value)} />\r\n            <input type=\"text\" placeholder=\"Location\" value={body} onChange={(e) => setBody(e.target.value)} />\r\n            <input type=\"text\" placeholder=\"description\" value={description} onChange={(e) => setDescription(e.target.value)} />\r\n            \r\n            <button className='btn waves-effect waves-light #64b5f6 blue darken-1' onClick={() => postDetails()} >Submit POST</button>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Createpost;\r\n\r\n\r\n\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}