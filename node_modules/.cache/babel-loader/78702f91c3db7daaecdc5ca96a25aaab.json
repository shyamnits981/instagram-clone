{"ast":null,"code":"import _slicedToArray from \"C:\\\\Users\\\\Shyam\\\\Desktop\\\\instaclone_final\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\Users\\\\Shyam\\\\Desktop\\\\instaclone_final\\\\client\\\\src\\\\components\\\\screens\\\\CreatePost.js\";\n\nimport React, { useState, useEffect } from \"react\";\nimport M from 'materialize-css';\nimport { useNavigate } from \"react-router-dom\";\n\nvar Createpost = function Createpost() {\n  var navigate = useNavigate();\n\n  var _useState = useState(\"\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      title = _useState2[0],\n      setTitle = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      _useState4 = _slicedToArray(_useState3, 2),\n      body = _useState4[0],\n      setBody = _useState4[1];\n\n  var _useState5 = useState(\"\"),\n      _useState6 = _slicedToArray(_useState5, 2),\n      description = _useState6[0],\n      setDescription = _useState6[1];\n\n  var _useState7 = useState(\"\"),\n      _useState8 = _slicedToArray(_useState7, 2),\n      image = _useState8[0],\n      setImage = _useState8[1];\n\n  var _useState9 = useState(\"\"),\n      _useState10 = _slicedToArray(_useState9, 2),\n      url = _useState10[0],\n      setUrl = _useState10[1];\n\n  useEffect(function () {\n    if (url) {\n      fetch(\"/createpost\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"Authorization\": \"Bearer \" + localStorage.getItem(\"jwt\")\n        },\n        body: JSON.stringify({\n          title: title,\n          body: body,\n          description: description,\n          pic: url\n        })\n      }).then(function (res) {\n        return res.json();\n      }).then(function (data) {\n        console.log(data);\n\n        if (data.error) {\n          M.toast({\n            html: data.error,\n            classes: \"#ef9a9a red lighten-3\"\n          });\n        } else {\n          M.toast({\n            html: \"Created Post successfully\",\n            classes: \"#e91e63 pink\"\n          });\n          navigate('/postview');\n        }\n      }).catch(function (err) {\n        console.log(err);\n      });\n    }\n  }, [url]);\n\n  var postDetails = function postDetails() {\n    var data = new FormData();\n    data.append(\"file\", image);\n    data.append(\"upload_preset\", \"instagramclone\");\n    data.append(\"cloud_name\", \"daxiadpan\");\n    fetch(\"https://api.cloudinary.com/v1_1/daxiadpan/image/upload\", {\n      method: \"post\",\n      body: data\n    }).then(function (res) {\n      return res.json();\n    }).then(function (data) {\n      setUrl(data.url);\n    }).catch(function (err) {\n      console.log(err);\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card input-filed\",\n    style: {\n      margin: \"10px auto\",\n      maxWidth: \"500px\",\n      padding: \"20px\",\n      textAlign: \"center\",\n      \"background-color\": \" #e6e6e6\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"file-field input-field\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"btn \",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 21\n    }\n  }, \"Choose a file\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"file\",\n    onChange: function onChange(e) {\n      return setImage(e.target.files[0]);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"file-path-wrapper\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    className: \"file-path validate\",\n    type: \"text\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 17\n    }\n  }))), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    placeholder: \"Author\",\n    value: title,\n    onChange: function onChange(e) {\n      return setTitle(e.target.value);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    placeholder: \"Location\",\n    value: body,\n    onChange: function onChange(e) {\n      return setBody(e.target.value);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    placeholder: \"description\",\n    value: description,\n    onChange: function onChange(e) {\n      return setDescription(e.target.value);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn waves-effect waves-light #64b5f6 blue darken-1\",\n    onClick: function onClick() {\n      return postDetails();\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 13\n    }\n  }, \"Submit POST\"));\n};\n\nexport default Createpost;","map":{"version":3,"names":["React","useState","useEffect","M","useNavigate","Createpost","navigate","title","setTitle","body","setBody","description","setDescription","image","setImage","url","setUrl","fetch","method","headers","localStorage","getItem","JSON","stringify","pic","then","res","json","data","console","log","error","toast","html","classes","catch","err","postDetails","FormData","append","margin","maxWidth","padding","textAlign","e","target","files","value"],"sources":["C:/Users/Shyam/Desktop/instaclone_final/client/src/components/screens/CreatePost.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport M from 'materialize-css';\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\n\r\nconst Createpost = ()=> {\r\n    const navigate = useNavigate();\r\n    const [title, setTitle] = useState(\"\")\r\n    const [body, setBody] = useState(\"\")\r\n    const [description, setDescription] = useState(\"\")\r\n    const [image, setImage] = useState(\"\")\r\n    const [url, setUrl] = useState(\"\")\r\n   \r\n   \r\n    useEffect(() => {\r\n        if (url) {\r\n            fetch(\"/createpost\", {\r\n                method: \"POST\",\r\n                headers: {\r\n                    \"Content-Type\":\"application/json\",\r\n                    \"Authorization\":\"Bearer \" +localStorage.getItem(\"jwt\")\r\n                },\r\n                body:JSON.stringify({\r\n                    title,\r\n                    body,\r\n                    description,\r\n                    pic:url\r\n\r\n                })\r\n            })\r\n                .then(res=> res.json())\r\n                .then(data=> {\r\n                    console.log(data)\r\n                    if (data.error) {\r\n                        M.toast({ html: data.error, classes: \"#ef9a9a red lighten-3\" })\r\n                    }\r\n                    else {\r\n                        M.toast({ html: \"Created Post successfully\", classes: \"#e91e63 pink\" })\r\n                        navigate('/postview')\r\n                    }\r\n                }).catch(err => {\r\n                    console.log(err)\r\n                })\r\n           }\r\n    }, [url])\r\n    const postDetails = () => {\r\n        const data = new FormData()\r\n        data.append(\"file\", image)\r\n        data.append(\"upload_preset\", \"instagramclone\")\r\n        data.append(\"cloud_name\", \"daxiadpan\")\r\n\r\n        fetch(\"https://api.cloudinary.com/v1_1/daxiadpan/image/upload\", {\r\n            method: \"post\",\r\n            body: data\r\n       \r\n        }).then(res=> res.json())\r\n            .then(data=> {\r\n                setUrl(data.url)\r\n            })\r\n            .catch(err => {\r\n                console.log(err);\r\n            })\r\n         }\r\n    return (\r\n        <div className=\"card input-filed\"\r\n            style={{\r\n\r\n                margin: \"10px auto\",\r\n                maxWidth: \"500px\",\r\n                padding: \"20px\",\r\n                textAlign: \"center\",\r\n                \"background-color\":\" #e6e6e6\"\r\n            }}\r\n        >\r\n\r\n                <div className=\"file-field input-field\">\r\n                <div className=\"btn \">\r\n                    <span>Choose a file</span>\r\n                    <input type=\"file\" onChange={(e) => setImage(e.target.files[0])} />\r\n                </div>\r\n                <div className=\"file-path-wrapper\">\r\n                <input className=\"file-path validate\" type=\"text\" />\r\n            </div>\r\n            </div>\r\n            <input type=\"text\" placeholder=\"Author\" value={title} onChange={(e) => setTitle(e.target.value)} />\r\n            <input type=\"text\" placeholder=\"Location\" value={body} onChange={(e) => setBody(e.target.value)} />\r\n            <input type=\"text\" placeholder=\"description\" value={description} onChange={(e) => setDescription(e.target.value)} />\r\n            \r\n            <button className='btn waves-effect waves-light #64b5f6 blue darken-1' onClick={() => postDetails()} >Submit POST</button>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Createpost;\r\n\r\n\r\n\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}